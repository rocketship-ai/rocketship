# Example values to enable the GitHub device-flow controlplane for self-hosted clusters.
# Replace client IDs, secrets, and TLS secret names with values from your environment.

auth:
  mode: github
  oidc:
    enabled: false

controlplane:
  enabled: true
  image:
    repository: rocketshipai/rocketship-controlplane
    tag: latest
  issuer: https://auth.globalbank.rocketship.sh
  audience: rocketship-cli
  clientID: rocketship-cli
  scopes:
    - read:user
    - user:email
  github:
    clientID: YOUR_GITHUB_CLIENT_ID
    clientSecretSecret: globalbank-github-oauth
    scopes:
      - read:user
      - user:email
  signingKey:
    secretName: globalbank-controlplane-signing
    key: signing-key.pem
    mountPath: /var/run/rocketship
    fileName: signing-key.pem
  database:
    secretName: globalbank-controlplane-database
    secretKey: DATABASE_URL
  refreshTokenKey:
    secretName: globalbank-controlplane-secrets
    secretKey: ROCKETSHIP_CONTROLPLANE_REFRESH_KEY
  ingress:
    enabled: true
    className: nginx
    annotations: {}
    hosts:
      - host: auth.globalbank.rocketship.sh
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: globalbank-rocketship-tls
        hosts:
          - auth.globalbank.rocketship.sh
  env:
    - name: ROCKETSHIP_CONTROLPLANE_ACCESS_TTL
      value: 15m
    - name: ROCKETSHIP_CONTROLPLANE_REFRESH_TTL
      value: 720h
  envFrom:
    - secretRef:
        name: globalbank-github-oauth

postgres:
  enabled: true
  auth:
    username: rocketship
    password: CHANGE_ME
    database: rocketship
  primary:
    persistence:
      enabled: true
      size: 5Gi
