name: "Simple HTTP API Test Suite"
description: "A simple test suite demonstrating HTTP testing with delays"
version: "v1.0.0"
tests:
  - name: "Get Users List"
    steps:
      - name: "Delay Step"
        plugin: "delay"
        config:
          duration: "5s"
      - name: "Get user list"
        plugin: "http"
        config:
          method: "GET"
          url: "https://jsonplaceholder.typicode.com/users"
          headers:
            Accept: "application/json"
        assertions:
          - type: "status_code"
            expected: 200
          - type: "json_path"
            path: "length"
            expected: 10

  - name: "Get Single User"
    steps:
      - name: "Delay Step"
        plugin: "delay"
        config:
          duration: "5s"
      - name: "Get specific user"
        plugin: "http"
        config:
          method: "GET"
          url: "https://jsonplaceholder.typicode.com/users/1"
          headers:
            Accept: "application/json"
        assertions:
          - type: "status_code"
            expected: 200
          - type: "json_path"
            path: ".name"
            expected: "Leanne Graham"
          - type: "json_path"
            path: ".email"
            expected: "Sincere@april.biz"

  - name: "Create New User"
    steps:
      - name: "Delay Step"
        plugin: "delay"
        config:
          duration: "5s"
      - name: "Create user"
        plugin: "http"
        config:
          method: "POST"
          url: "https://jsonplaceholder.typicode.com/users"
          headers:
            Content-Type: "application/json"
          body: |
            {
              "name": "John Doe",
              "username": "johndoe",
              "email": "john@example.com"
            }
        assertions:
          - type: "status_code"
            expected: 201
          - type: "json_path"
            path: ".id"
            expected: 11

  - name: "Update User"
    steps:
      - name: "Delay Step"
        plugin: "delay"
        config:
          duration: "5s"
      - name: "Update user"
        plugin: "http"
        config:
          method: "PUT"
          url: "https://jsonplaceholder.typicode.com/users/1"
          headers:
            Content-Type: "application/json"
          body: |
            {
              "name": "Jane Smith",
              "username": "janesmith",
              "email": "jane@example.com"
            }
        assertions:
          - type: "status_code"
            expected: 200
          - type: "json_path"
            path: ".name"
            expected: "Jane Smith"
          - type: "json_path"
            path: ".email"
            expected: "jane@example.com"

  - name: "Delete User"
    steps:
      - name: "Delay Step"
        plugin: "delay"
        config:
          duration: "5s"
      - name: "Delete user"
        plugin: "http"
        config:
          method: "DELETE"
          url: "https://jsonplaceholder.typicode.com/users/1"
          headers:
            Accept: "application/json"
        assertions:
          - type: "status_code"
            expected: 200
          - type: "json_path"
            path: "tostring"
            expected: "{}"
      - name: "Verify user still accessible (mock API behavior)"
        plugin: "http"
        config:
          method: "GET"
          url: "https://jsonplaceholder.typicode.com/users/1"
          headers:
            Accept: "application/json"
        assertions:
          - type: "status_code"
            expected: 200
          - type: "json_path"
            path: ".id"
            expected: 1
