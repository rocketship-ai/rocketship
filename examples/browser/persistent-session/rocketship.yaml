name: "Persistent browser session demo"
tests:
  - name: "interleaved flow"
    steps:
      - name: "start browser"
        plugin: playwright
        config:
          role: start
          session_id: "checkout-{{ .run.id }}"
          headless: true

      - name: "visit landing page"
        plugin: playwright
        config:
          role: script
          session_id: "checkout-{{ .run.id }}"
          language: python
          script: |
            page.goto("https://example.com")
            result = {"title": page.title()}

      - name: "summarize via agent"
        plugin: browser_use
        config:
          session_id: "checkout-{{ .run.id }}"
          task: "Read the page currently open and summarize it in one sentence."
          allowed_domains:
            - "example.com"
          max_steps: 4

      - name: "stop browser"
        plugin: playwright
        config:
          role: stop
          session_id: "checkout-{{ .run.id }}"
