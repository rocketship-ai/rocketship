name: "Browser Plugin Debug Test"
description: "Test browser plugin with debug output"
version: "v1.0.0"

vars:
  test_url: "https://httpbin.org/html"

tests:
  - name: "Debug browser automation"
    steps:
      - name: "Simple webpage visit"
        plugin: browser
        config:
          task: "Navigate to {{vars.test_url}} and tell me what you see on the page"
          llm:
            provider: "openai"
            model: "gpt-4"
            config:
              OPENAI_API_KEY: "${OPENAI_API_KEY}"
          executor_type: "python"
          headless: true
          timeout: "3m"
          max_steps: 5
          use_vision: true
        save:
          - json_path: ".result"
            as: "page_description"
          - json_path: ".success"
            as: "success"
          - json_path: ".error"
            as: "error_msg"
            required: false
        assertions:
          - type: "json_path"
            path: ".success"
            expected: true

      - name: "Log browser results"
        plugin: log
        config:
          message: |
            Browser automation results:
            Success: {{success}}
            Description: {{page_description}}
            Error: {{error_msg}}